(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-yaopin-list"],{"0432":function(t,n,a){"use strict";(function(t){var i=a("4ea4");a("a9e3"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var e=i(a("5530")),u=a("520c"),r=a("26cb"),o={data:function(){return{searchVal:"",tableData:[],pageSize:10,pageCurrent:1,total:0,loading:!1,clickID:"",clickAddKucunObj:{}}},computed:(0,e.default)((0,e.default)((0,e.default)((0,e.default)({},(0,r.mapState)("app",["appName"])),(0,r.mapState)("app",["routes"])),(0,r.mapState)("user",["userInfo"])),(0,r.mapState)("error",["logs"])),onLoad:function(){this.selectedIndexs=[],this.getData(1)},methods:{close:function(){this.$refs.popup.close()},addKucunFn:function(t){this.clickAddKucunObj=t,this.$refs.popup.open()},dialogInputConfirm:function(n){var a=this,i=/^-?[0-9]/;if(i.test(n)){n=n;var e=this.clickAddKucunObj,r=e._id,o=e.shuliang;o=Number(o)+Number(n),t.callFunction({name:"a-yaopin",data:{_id:r,shuliang:o,type:"addKucun"},success:function(t){uni.showToast({title:"更新成功"}),uni.hideLoading(),a.getData(1);var i=r,e=n;(0,u.addYaoPinJournal)("add","添加库存",i,e)},fail:function(t){uni.showToast({title:"更新失败"})}})}else uni.showToast({title:"请输入数字（正数，负数）",icon:"error"})},change:function(t){this.getData(t.current)},search:function(){this.getData(1,this.searchVal)},getData:function(n){var a=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";this.pageCurrent=n,uni.showLoading({title:"查询中...",mask:!0});var e={page:this.pageCurrent,limit:this.pageSize,type:"list"};""!=i&&(e.value=i),t.callFunction({name:"a-yaopin",data:e,success:function(t){a.tableData=t.result.listArr.data,a.total=t.result.total.total,uni.hideLoading()},fail:function(t){}})},gotoPage:function(t,n){var a=this;switch(t){case"detail":uni.navigateTo({url:"./detail/detail?id="+n._id});break;case"add":uni.navigateTo({url:"./add/add"});break;case"del":uni.showModal({title:"提示",content:"确定要删除该条记录吗？",success:function(t){t.confirm&&a.delFn(n._id)}});break;case"edit":uni.navigateTo({url:"./edit/edit?item="+encodeURIComponent(JSON.stringify(n))});break}},delFn:function(n){var a=this;uni.showLoading({title:"删除中...",mask:!0}),t.callFunction({name:"a-yaopin",data:{id:n,type:"del"},success:function(t){var i=n;(0,u.addYaoPinJournal)("del","删除库存",i),uni.showToast({title:"删除成功"}),uni.hideLoading(),a.getData(1)},fail:function(t){uni.showToast({title:"删除失败"})}})}}};n.default=o}).call(this,a("a9ff")["default"])},"0ccb":function(t,n,a){var i=a("50c4"),e=a("1148"),u=a("1d80"),r=Math.ceil,o=function(t){return function(n,a,o){var s,c,l=String(u(n)),d=l.length,f=void 0===o?" ":String(o),p=i(a);return p<=d||""==f?l:(s=p-d,c=e.call(f,r(s/f.length)),c.length>s&&(c=c.slice(0,s)),t?l+c:c+l)}};t.exports={start:o(!1),end:o(!0)}},1148:function(t,n,a){"use strict";var i=a("a691"),e=a("1d80");t.exports="".repeat||function(t){var n=String(e(this)),a="",u=i(t);if(u<0||u==1/0)throw RangeError("Wrong number of repetitions");for(;u>0;(u>>>=1)&&(n+=n))1&u&&(a+=n);return a}},2881:function(t,n,a){var i=a("4440");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var e=a("4f06").default;e("74c37872",i,!0,{sourceMap:!1,shadowMode:!1})},"3e32":function(t,n,a){"use strict";a.r(n);var i=a("0432"),e=a.n(i);for(var u in i)"default"!==u&&function(t){a.d(n,t,(function(){return i[t]}))}(u);n["default"]=e.a},4440:function(t,n,a){var i=a("24fb");n=i(!1),n.push([t.i,"[data-v-60dfc169] .uni-group{flex-wrap:nowrap}[data-v-60dfc169] .uni-group .uni-button{margin-left:0;margin-right:10px!important}",""]),t.exports=n},"4d90":function(t,n,a){"use strict";var i=a("23e7"),e=a("0ccb").start,u=a("9a0c");i({target:"String",proto:!0,forced:u},{padStart:function(t){return e(this,t,arguments.length>1?arguments[1]:void 0)}})},"520c":function(t,n,a){"use strict";(function(t){function i(t,n){if(0===arguments.length||!t)return null;var a,i=n||"{y}-{m}-{d} {h}:{i}:{s}";"object"===typeof t?a=t:("string"===typeof t&&(t=/^[0-9]+$/.test(t)?parseInt(t):t.replace(new RegExp(/-/gm),"/")),"number"===typeof t&&10===t.toString().length&&(t*=1e3),a=new Date(t));var e={y:a.getFullYear(),m:a.getMonth()+1,d:a.getDate(),h:a.getHours(),i:a.getMinutes(),s:a.getSeconds(),a:a.getDay()},u=i.replace(/{([ymdhisa])+}/g,(function(t,n){var a=e[n];return"a"===n?["日","一","二","三","四","五","六"][a]:a.toString().padStart(2,"0")}));return u}function e(n,a,e,u){var r=i(new Date,"{y}-{m}-{d} {h}:{i}:{s}"),o=uni.getStorageSync("lastUsername"),s={type:"addYaoPinJournal",people:o,time:r,operationType:n,shuoming:a,yaopinID:e,addKucunNum:u};t.callFunction({name:"a-yaopin",data:s,success:function(t){},fail:function(t){}})}a("d3b7"),a("e25e"),a("4d63"),a("ac1f"),a("25f0"),a("4d90"),a("5319"),Object.defineProperty(n,"__esModule",{value:!0}),n.parseTime=i,n.addYaoPinJournal=e}).call(this,a("a9ff")["default"])},"67fb":function(t,n,a){"use strict";var i=a("2881"),e=a.n(i);e.a},9251:function(t,n,a){"use strict";a.r(n);var i=a("a301"),e=a("3e32");for(var u in e)"default"!==u&&function(t){a.d(n,t,(function(){return e[t]}))}(u);a("67fb");var r,o=a("f0c5"),s=Object(o["a"])(e["default"],i["b"],i["c"],!1,null,"60dfc169",null,!1,i["a"],r);n["default"]=s.exports},"9a0c":function(t,n,a){var i=a("342f");t.exports=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(i)},a301:function(t,n,a){"use strict";a.d(n,"b",(function(){return e})),a.d(n,"c",(function(){return u})),a.d(n,"a",(function(){return i}));var i={uniTable:a("9e02").default,uniTr:a("158c").default,uniTh:a("1bb9").default,uniTd:a("1cbc").default,uniPagination:a("41c2").default,uniPopup:a("4f6b").default,uniPopupDialog:a("01fe").default},e=function(){var t=this,n=t.$createElement,a=t._self._c||n;return a("v-uni-view",[a("v-uni-view",{staticClass:"uni-header"},[a("v-uni-view",{staticClass:"uni-group hide-on-phone"},[a("v-uni-view",{staticClass:"uni-title"},[t._v("库存管理")])],1),a("v-uni-view",{staticClass:"uni-group"},[a("v-uni-input",{staticClass:"uni-search",attrs:{type:"text",placeholder:"请输入商品名称"},on:{confirm:function(n){arguments[0]=n=t.$handleEvent(n),t.search.apply(void 0,arguments)}},model:{value:t.searchVal,callback:function(n){t.searchVal=n},expression:"searchVal"}}),a("v-uni-button",{staticClass:"uni-button",attrs:{type:"default",size:"mini"},on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.search.apply(void 0,arguments)}}},[t._v(t._s(t.$t("common.button.search")))]),a("v-uni-button",{staticClass:"uni-button",attrs:{type:"primary",size:"mini"},on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.gotoPage("add")}}},[t._v(t._s(t.$t("common.button.add")))])],1)],1),a("v-uni-view",{staticClass:"uni-container"},[a("uni-table",{attrs:{loading:t.loading,border:!0,stripe:!0,emptyText:t.$t("common.empty")}},[a("uni-tr",[a("uni-th",{attrs:{width:"40",align:"center"}},[t._v("ID")]),a("uni-th",{attrs:{width:"150",align:"center"}},[t._v("药名")]),a("uni-th",{attrs:{width:"60",align:"center"}},[t._v("规格")]),a("uni-th",{attrs:{width:"100",align:"center"}},[t._v("生产单位")]),a("uni-th",{attrs:{width:"100",align:"center"}},[t._v("有效期")]),a("uni-th",{attrs:{width:"100",align:"center"}},[t._v("生产日期")]),a("uni-th",{attrs:{width:"80",align:"center"}},[t._v("库存")]),a("uni-th",{attrs:{width:"80",align:"center"}},[t._v("单位")]),a("uni-th",{attrs:{width:"120",align:"center"}},[t._v("单价")]),a("uni-th",{attrs:{width:"120",align:"center"}},[t._v("总价")]),a("uni-th",{attrs:{width:"100",align:"center"}},[t._v("添加时间")]),a("uni-th",{attrs:{width:"100",align:"center"}},[t._v("入库员")]),a("uni-th",{attrs:{width:"300",align:"center"}},[t._v("操作")])],1),t._l(t.tableData,(function(n,i){return a("uni-tr",{key:i},[a("uni-td",{attrs:{align:"center"}},[t._v(t._s(i+1))]),a("uni-td",{attrs:{align:"center"}},[t._v(t._s(n.name))]),a("uni-td",{attrs:{align:"center"}},[t._v(t._s(n.guige))]),a("uni-td",{attrs:{align:"center"}},[t._v(t._s(n.shengchandanwei))]),a("uni-td",{attrs:{align:"center"}},[t._v(t._s(n.youxiaoqi))]),a("uni-td",{attrs:{align:"center"}},[t._v(t._s(n.shengchanriqi))]),a("uni-td",{attrs:{align:"center"}},[t._v(t._s(n.shuliang))]),a("uni-td",{attrs:{align:"center"}},[t._v(t._s(n.danwei))]),a("uni-td",{attrs:{align:"center"}},[t._v(t._s(n.danjia))]),a("uni-td",{attrs:{align:"center"}},[t._v(t._s(n.zognjia))]),a("uni-td",{attrs:{align:"center"}},[t._v(t._s(n.addTime))]),a("uni-td",{attrs:{align:"center"}},[t._v(t._s(n.addPeople))]),a("uni-td",[a("v-uni-view",{staticClass:"uni-group"},[a("v-uni-button",{staticClass:"uni-button",attrs:{size:"mini",type:"warn"},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.addKucunFn(n)}}},[t._v("添加库存")]),a("v-uni-button",{staticClass:"uni-button",attrs:{size:"mini",type:"primary"},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.gotoPage("edit",n)}}},[t._v("修改药品基本信息")]),a("v-uni-button",{staticClass:"uni-button",attrs:{size:"mini",type:"warn"},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.gotoPage("del",n)}}},[t._v(t._s(t.$t("common.button.delete")))]),a("v-uni-button",{staticClass:"uni-button",attrs:{size:"mini",type:"primary"},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.gotoPage("detail",n)}}},[t._v("详情")])],1)],1)],1)}))],2),a("v-uni-view",{staticClass:"uni-pagination-box"},[a("uni-pagination",{attrs:{"show-icon":!0,"page-size":t.pageSize,current:t.pageCurrent,total:t.total},on:{change:function(n){arguments[0]=n=t.$handleEvent(n),t.change.apply(void 0,arguments)}}})],1)],1),a("uni-popup",{ref:"popup",attrs:{type:"dialog"}},[a("uni-popup-dialog",{ref:"inputClose",attrs:{mode:"input",title:"新增库存",value:"",placeholder:"请输入要添加的库存数量(新增数量)"},on:{confirm:function(n){arguments[0]=n=t.$handleEvent(n),t.dialogInputConfirm.apply(void 0,arguments)}}})],1)],1)},u=[]}}]);