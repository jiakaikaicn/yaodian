(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-yaopin-list"],{"0432":function(t,n,i){"use strict";(function(t){var a=i("4ea4");i("a9e3"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var e=a(i("5530")),u=i("520c"),o=i("26cb"),s={data:function(){return{searchVal:"",tableData:[],pageSize:10,pageCurrent:1,total:0,loading:!1,clickID:"",clickAddKucunObj:{}}},computed:(0,e.default)((0,e.default)((0,e.default)((0,e.default)({},(0,o.mapState)("app",["appName"])),(0,o.mapState)("app",["routes"])),(0,o.mapState)("user",["userInfo"])),(0,o.mapState)("error",["logs"])),onLoad:function(){this.selectedIndexs=[],this.getData(1)},methods:{close:function(){this.$refs.popup.close()},addKucunFn:function(t){this.clickAddKucunObj=t,this.$refs.popup.open()},dialogInputConfirm:function(n){var i=this,a=/^-?[0-9]/;if(a.test(n)){n=n;var e=this.clickAddKucunObj,o=e._id,s=e.shuliang;s=Number(s)+Number(n),t.callFunction({name:"a-yaopin",data:{_id:o,shuliang:s,type:"addKucun"},success:function(t){uni.showToast({title:"更新成功"}),uni.hideLoading(),i.getData(1);var a=o,e=n;(0,u.addYaoPinJournal)("add","添加库存",a,e)},fail:function(t){uni.showToast({title:"更新失败"})}})}else uni.showToast({title:"请输入数字（正数，负数）",icon:"error"})},change:function(t){this.getData(t.current)},search:function(){this.getData(1,this.searchVal)},getData:function(n){var i=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";this.pageCurrent=n,uni.showLoading({title:"查询中...",mask:!0});var e={page:this.pageCurrent,limit:this.pageSize,type:"list"};""!=a&&(e.value=a),t.callFunction({name:"a-yaopin",data:e,success:function(t){i.tableData=t.result.listArr.data,i.total=t.result.total.total,uni.hideLoading()},fail:function(t){}})},gotoPage:function(t,n){var i=this;switch(t){case"detail":uni.navigateTo({url:"./detail/detail?id="+n._id});break;case"add":uni.navigateTo({url:"./add/add"});break;case"del":uni.showModal({title:"提示",content:"确定要删除该条记录吗？",success:function(t){t.confirm&&i.delFn(n._id)}});break;case"edit":uni.navigateTo({url:"./edit/edit?item="+encodeURIComponent(JSON.stringify(n))});break}},delFn:function(n){var i=this;uni.showLoading({title:"删除中...",mask:!0}),t.callFunction({name:"a-yaopin",data:{id:n,type:"del"},success:function(t){var a=n;(0,u.addYaoPinJournal)("del","删除库存",a),uni.showToast({title:"删除成功"}),uni.hideLoading(),i.getData(1)},fail:function(t){uni.showToast({title:"删除失败"})}})}}};n.default=s}).call(this,i("a9ff")["default"])},"0ccb":function(t,n,i){var a=i("50c4"),e=i("1148"),u=i("1d80"),o=Math.ceil,s=function(t){return function(n,i,s){var r,c,l=String(u(n)),d=l.length,f=void 0===s?" ":String(s),g=a(i);return g<=d||""==f?l:(r=g-d,c=e.call(f,o(r/f.length)),c.length>r&&(c=c.slice(0,r)),t?l+c:c+l)}};t.exports={start:s(!1),end:s(!0)}},1148:function(t,n,i){"use strict";var a=i("a691"),e=i("1d80");t.exports="".repeat||function(t){var n=String(e(this)),i="",u=a(t);if(u<0||u==1/0)throw RangeError("Wrong number of repetitions");for(;u>0;(u>>>=1)&&(n+=n))1&u&&(i+=n);return i}},"2b0f":function(t,n,i){var a=i("2e42");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var e=i("4f06").default;e("3be71b99",a,!0,{sourceMap:!1,shadowMode:!1})},"2e42":function(t,n,i){var a=i("24fb");n=a(!1),n.push([t.i,"[data-v-4cb6f106] .uni-group{flex-wrap:nowrap}[data-v-4cb6f106] .uni-group .uni-button{margin-left:0;margin-right:10px!important}",""]),t.exports=n},"34cf":function(t,n,i){"use strict";var a=i("2b0f"),e=i.n(a);e.a},"3e32":function(t,n,i){"use strict";i.r(n);var a=i("0432"),e=i.n(a);for(var u in a)"default"!==u&&function(t){i.d(n,t,(function(){return a[t]}))}(u);n["default"]=e.a},"4d90":function(t,n,i){"use strict";var a=i("23e7"),e=i("0ccb").start,u=i("9a0c");a({target:"String",proto:!0,forced:u},{padStart:function(t){return e(this,t,arguments.length>1?arguments[1]:void 0)}})},"520c":function(t,n,i){"use strict";(function(t){function a(t,n){if(0===arguments.length||!t)return null;var i,a=n||"{y}-{m}-{d} {h}:{i}:{s}";"object"===typeof t?i=t:("string"===typeof t&&(t=/^[0-9]+$/.test(t)?parseInt(t):t.replace(new RegExp(/-/gm),"/")),"number"===typeof t&&10===t.toString().length&&(t*=1e3),i=new Date(t));var e={y:i.getFullYear(),m:i.getMonth()+1,d:i.getDate(),h:i.getHours(),i:i.getMinutes(),s:i.getSeconds(),a:i.getDay()},u=a.replace(/{([ymdhisa])+}/g,(function(t,n){var i=e[n];return"a"===n?["日","一","二","三","四","五","六"][i]:i.toString().padStart(2,"0")}));return u}function e(n,i,e,u){var o=a(new Date,"{y}-{m}-{d} {h}:{i}:{s}"),s=uni.getStorageSync("lastUsername"),r={type:"addYaoPinJournal",people:s,time:o,operationType:n,shuoming:i,yaopinID:e,addKucunNum:u};t.callFunction({name:"a-yaopin",data:r,success:function(t){},fail:function(t){}})}function u(n){uni.showLoading({title:"删除中...",mask:!0});var i={id:n,type:"del"};t.callFunction({name:"a-dingdan",data:i,success:function(t){uni.showToast({title:"删除成功"}),uni.hideLoading()},fail:function(t){uni.showToast({title:"删除失败"})}})}function o(n){var i=n.list,a="";""==n.dingdanID?(n.type="addDingdan",a="新建订单中..."):(n.type="upDateDingdan",a="更新订单中..."),uni.showLoading({title:a,mask:!0}),t.callFunction({name:"a-dingdan",data:n,success:function(t){"10000"==t.result.code&&s(i),uni.hideLoading()},fail:function(t){uni.showToast({title:"操作失败，请联系管理员"})}})}function s(n){var i={list:n,type:"hexiaoDingdan"};t.callFunction({name:"a-dingdan",data:i,success:function(t){uni.showToast({title:"核销成功"}),setTimeout((function(){uni.navigateTo({url:"/pages/xiaoshou/dingdan/dingdan"})}),1e3)},fail:function(t){uni.showToast({title:"操作失败，请联系管理员"})}})}function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:+new Date,n=new Date(t+288e5),i=n.toJSON().substr(0,19).replace("T"," ");return i}i("f4b3"),i("d3b7"),i("e25e"),i("4d63"),i("ac1f"),i("25f0"),i("4d90"),i("5319"),i("bf19"),Object.defineProperty(n,"__esModule",{value:!0}),n.parseTime=a,n.addYaoPinJournal=e,n.delDingdanFn=u,n.dingdanFn=o,n.hexiaoYP=s,n.timeFn=r}).call(this,i("a9ff")["default"])},8771:function(t,n,i){"use strict";i.d(n,"b",(function(){return e})),i.d(n,"c",(function(){return u})),i.d(n,"a",(function(){return a}));var a={uniTable:i("9e02").default,uniTr:i("158c").default,uniTh:i("1bb9").default,uniTd:i("1cbc").default,uniPagination:i("41c2").default,uniPopup:i("4f6b").default,uniPopupDialog:i("01fe").default},e=function(){var t=this,n=t.$createElement,i=t._self._c||n;return i("v-uni-view",[i("v-uni-view",{staticClass:"uni-header"},[i("v-uni-view",{staticClass:"uni-group hide-on-phone"},[i("v-uni-view",{staticClass:"uni-title"},[t._v("库存管理")])],1),i("v-uni-view",{staticClass:"uni-group"},[i("v-uni-input",{staticClass:"uni-search",attrs:{type:"text",placeholder:"请输入商品名称"},on:{confirm:function(n){arguments[0]=n=t.$handleEvent(n),t.search.apply(void 0,arguments)}},model:{value:t.searchVal,callback:function(n){t.searchVal=n},expression:"searchVal"}}),i("v-uni-button",{staticClass:"uni-button",attrs:{type:"default",size:"mini"},on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.search.apply(void 0,arguments)}}},[t._v(t._s(t.$t("common.button.search")))]),i("v-uni-button",{staticClass:"uni-button",attrs:{type:"primary",size:"mini"},on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.gotoPage("add")}}},[t._v(t._s(t.$t("common.button.add")))])],1)],1),i("v-uni-view",{staticClass:"uni-container"},[i("uni-table",{attrs:{loading:t.loading,border:!0,stripe:!0,emptyText:t.$t("common.empty")}},[i("uni-tr",[i("uni-th",{attrs:{width:"40",align:"center"}},[t._v("ID")]),i("uni-th",{attrs:{width:"150",align:"center"}},[t._v("药名")]),i("uni-th",{attrs:{width:"60",align:"center"}},[t._v("规格")]),i("uni-th",{attrs:{width:"100",align:"center"}},[t._v("生产单位")]),i("uni-th",{attrs:{width:"100",align:"center"}},[t._v("有效期")]),i("uni-th",{attrs:{width:"100",align:"center"}},[t._v("生产日期")]),i("uni-th",{attrs:{width:"80",align:"center"}},[t._v("库存")]),i("uni-th",{attrs:{width:"80",align:"center"}},[t._v("单位")]),i("uni-th",{attrs:{width:"80",align:"center"}},[t._v("进货价")]),i("uni-th",{attrs:{width:"120",align:"center"}},[t._v("销售单价")]),i("uni-th",{attrs:{width:"120",align:"center"}},[t._v("总价")]),i("uni-th",{attrs:{width:"100",align:"center"}},[t._v("添加时间")]),i("uni-th",{attrs:{width:"100",align:"center"}},[t._v("入库员")]),i("uni-th",{attrs:{width:"300",align:"center"}},[t._v("操作")])],1),t._l(t.tableData,(function(n,a){return i("uni-tr",{key:a},[i("uni-td",{attrs:{align:"center"}},[t._v(t._s(a+1))]),i("uni-td",{attrs:{align:"center"}},[t._v(t._s(n.name))]),i("uni-td",{attrs:{align:"center"}},[t._v(t._s(n.guige))]),i("uni-td",{attrs:{align:"center"}},[t._v(t._s(n.shengchandanwei))]),i("uni-td",{attrs:{align:"center"}},[t._v(t._s(n.youxiaoqi))]),i("uni-td",{attrs:{align:"center"}},[t._v(t._s(n.shengchanriqi))]),i("uni-td",{attrs:{align:"center"}},[t._v(t._s(n.shuliang))]),i("uni-td",{attrs:{align:"center"}},[t._v(t._s(n.danwei))]),i("uni-td",{attrs:{align:"center"}},[t._v(t._s(n.jinhuo_jia))]),i("uni-td",{attrs:{align:"center"}},[t._v(t._s(n.xiaoshou_jia))]),i("uni-td",{attrs:{align:"center"}},[t._v(t._s(n.jinhuo_jia*n.shuliang||0))]),i("uni-td",{attrs:{align:"center"}},[t._v(t._s(n.addTime))]),i("uni-td",{attrs:{align:"center"}},[t._v(t._s(n.addPeople))]),i("uni-td",[i("v-uni-view",{staticClass:"uni-group"},[i("v-uni-button",{staticClass:"uni-button",attrs:{size:"mini",type:"warn"},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.addKucunFn(n)}}},[t._v("添加库存")]),i("v-uni-button",{staticClass:"uni-button",attrs:{size:"mini",type:"primary"},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.gotoPage("edit",n)}}},[t._v("修改药品基本信息")]),i("v-uni-button",{staticClass:"uni-button",attrs:{size:"mini",type:"warn"},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.gotoPage("del",n)}}},[t._v(t._s(t.$t("common.button.delete")))]),i("v-uni-button",{staticClass:"uni-button",attrs:{size:"mini",type:"primary"},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.gotoPage("detail",n)}}},[t._v("详情")])],1)],1)],1)}))],2),i("v-uni-view",{staticClass:"uni-pagination-box"},[i("uni-pagination",{attrs:{"show-icon":!0,"page-size":t.pageSize,current:t.pageCurrent,total:t.total},on:{change:function(n){arguments[0]=n=t.$handleEvent(n),t.change.apply(void 0,arguments)}}})],1)],1),i("uni-popup",{ref:"popup",attrs:{type:"dialog"}},[i("uni-popup-dialog",{ref:"inputClose",attrs:{mode:"input",title:"新增库存",value:"",placeholder:"请输入要添加的库存数量(新增数量)"},on:{confirm:function(n){arguments[0]=n=t.$handleEvent(n),t.dialogInputConfirm.apply(void 0,arguments)}}})],1)],1)},u=[]},9251:function(t,n,i){"use strict";i.r(n);var a=i("8771"),e=i("3e32");for(var u in e)"default"!==u&&function(t){i.d(n,t,(function(){return e[t]}))}(u);i("34cf");var o,s=i("f0c5"),r=Object(s["a"])(e["default"],a["b"],a["c"],!1,null,"4cb6f106",null,!1,a["a"],o);n["default"]=r.exports},"9a0c":function(t,n,i){var a=i("342f");t.exports=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(a)}}]);